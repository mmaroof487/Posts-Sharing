<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script src="https://cdn.tailwindcss.com"></script>

		<title>Document</title>
	</head>
	<body>
		<main class="w-full p-8 h-screen text-white bg-zinc-900">
			<div class="text-3xl">Hello <%=user.username %></div>
			<div class="mt-4">
				<h2 class="text-lg mb-2">create a new post</h2>
				<form action="/post/create " method="post">
					<textarea name="content" name="content" class="resize-none w-1/2 p-4 bg-transparent border-2 border-zinc-700" placeholder="Whats on your mind"></textarea>
					<input type="submit" value="Create Post" class="block bg-blue-500 py-4 px-8 rounded-lg mt-3" />
				</form>
			</div>
			<div class="mt-8">
				<h3 class="text-2xl"><%= (user.posts.length == 0)?" No Previous Posts ": "Previous Posts"%></h3>

				<% user.posts.reverse().forEach( (val)=>{ %>
				<div class="post mt-4 bg-zinc-800 inline-block p-4 rounded-lg border-2 border-zinc-700 w-1/2">
					<h3 class="text-blue-500"><%= user.username%></h3>
					<h4 class="mt-3"><%= val.content%></h4>
					<small class="mt-3 block text-yellow-600"> <%=val.likes.length%> Likes </small>
					<div class="flex gap-5">
						<% if(val.likes.indexOf(user._id) == -1){ %>
						<a href="/posts/like/<%=val._id%>" class="text-cyan-300">Like</a>
						<% } else { %>
						<a href="/posts/like/<%=val._id%>" class="text-cyan-600">Unike</a>
						<%}%>
						<a href="/posts/edit/<%=val._id%>" class="text-green-700">Edit</a>
						<a href="/posts/delete/<%=val._id%>" class="text-red-700">Delete</a>
					</div>
				</div>
				<% } ) %>
			</div>
		</main>
	</body>
</html>
